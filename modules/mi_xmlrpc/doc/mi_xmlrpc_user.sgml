<!-- Module User's Guide -->

<chapter>
	<chapterinfo>
	<revhistory>
		<revision>
		<revnumber>$Revision$</revnumber>
		<date>$Date$</date>
		</revision>
	</revhistory>
	</chapterinfo>
	<title>User's Guide</title>
	
	<section>
	<title>Overview</title>
	<para>
		This module implements a xmlrpc server that handles xmlrpc requests and
		generates xmlrpc responses. When a xmlrpc message is received a default 
		method is executed.
	</para>
	<para>
		At first, it looks up the MI command. If found it parses the called procedure's 
		parameters into a MI tree and the command is executed. A MI reply tree is returned 
		that is formatted back in xmlrpc. The response is built in two ways - like a 
		string that contains the MI tree nodes information (name, values and attributes)
		or like an array whose elements are consisted of each MI tree node stored information. 
	</para>	
	</section>

	<section>
	<title>To-do</title>
		<para>
		Features to be added in the future:
		</para>
		<itemizedlist>
			<listitem><para>
			possibility to select the listening IP address
			</para></listitem>
			<listitem><para>
			multiple ports per IP address
			</para></listitem>
		</itemizedlist>
	</section>
	
	<section>
	<title>Dependencies</title>
	<section>
		<title>&ser; Modules</title>
		<para>
		The following modules must be loaded before this module:
			<itemizedlist>
			<listitem>
			<para>
				<emphasis>No dependencies on other &ser; modules</emphasis>.
			</para>
			</listitem>
			</itemizedlist>
		</para>
	</section>

	<section>
		<title>External Libraries or Applications</title>
		<para>
		The following libraries or applications must be installed before running
		&ser; with this module loaded:
			<itemizedlist>
			<listitem>
			<para>
				<emphasis>libxml</emphasis>.
			</para>
			</listitem>
			<listitem>
			<para>
				<emphasis>libxmlrpc-c3</emphasis>.
			</para>
			</listitem>
			<listitem>
			<para>
				<emphasis>libxmlrpc-c3-dev</emphasis>.
			</para>
			</listitem>
			</itemizedlist>
		</para>
	</section>
	</section>
	
	<section>
	<title>Exported Parameters</title>
	<section>
		<title><varname>port</varname>(integer)</title>
		<para>
		The port number used by the XMLRPX server to listen for incoming requests.
		</para>
		<para>
		<emphasis>The default values is 8080. Ports lower than 1024 are not accepted.</emphasis>
		</para>
		<example>
		<title>Set <varname>port</varname> parameter</title>
		<programlisting format="linespecific">
...
modparam("mi_xmlrpc", "port", 8000)
...
		</programlisting>
		</example>
	</section>
	<section>
		<title><varname>log_file</varname>(string)</title>
		<para>
		A log file to be used by the internal Abyss html server used by the XMLRPX library.
		</para>
		<para>
		<emphasis>The default values NONE (no logging).</emphasis>
		</para>
		<example>
		<title>Set <varname>log_file</varname> parameter</title>
		<programlisting format="linespecific">
...
modparam("mi_xmlrpc", "log_file", "/var/log/abyss.log")
...
		</programlisting>
		</example>
	</section>
	<section>
		<title><varname>reply_option</varname> (integer)</title>
		<para>
		Given the xmlrpc response specifications that a methodResponse can contain 
		a single params section with a single param section, there is the possibility to choose 
		between a string built response or an array built one.
		</para>
		<para>
		For a 0 value, a single string parameter will be replied (merging the whole response). 
		For non-0 value, each line from the response will be encoded as an element into an 
		array of strings.
		</para>
		<para>
		<emphasis> The default option is a string built response (0).</emphasis>
		</para>
		<example>
		<title>Set <varname>reply_option</varname> parameter</title>
		<programlisting format="linespecific">
...
modparam("mi_xmlrpc", "reply_option", 0)
...
		</programlisting>
		</example>
	</section>
	<section>
		<title><varname>buffer_size</varname> (integer)</title>
		<para>
		It specifies the maximum length of the buffer used to write in the MI tree node information
		in order to build the xmlrpc response.
		</para>
		<para>
		<emphasis> The default value is 8192.</emphasis>
		</para>
		<example>
		<title>Set <varname>reply_option</varname> parameter</title>
		<programlisting format="linespecific">
...
modparam("mi_xmlrpc", "buffer_size", 8192)
...
		</programlisting>
		</example>
	</section>

	<section>
	<title>Exported Functions</title>
		<para>
		No function exported to be used from configuration file.
		</para>
	</section>
	</section>

</chapter>

<!-- Keep this element at the end of the file
Local Variables:
sgml-parent-document: ("mi_xmlrpc.sgml" "Book" "chapter")
End:
-->

