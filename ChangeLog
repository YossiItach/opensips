# $Id$


===================== 2008-08-13 OpenSIPS v1.4.1 released ======================


2008-08-13 00:29:15  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4610] :
	backport from trunk (rev #4609)
	- complete the fix from rev #4600
	  Credits go to Amy Linari. part of patch 2044475.


2008-08-12 17:12:45  Ovidiu Sas <osas at voipembedded dot com> 

	* [4607] :
	backport from trunk (r4606):
	- get rid of load_ctlengine (it prevents displaying proper help for basectl functions)


2008-08-10 16:14:03  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4604] :
	backport from trunk (rev #4603):
	- fixed bug : route headers were not added in ACK and CANCEL when PATH was used by registrar module.
	  The condition for migrating the Route set from INVITE to ACK/CANCEL had to be releaxed a bit to cover the PATH case also, but without doing too much extra parsing.
	    Reported by Alex Hermann.


2008-08-10 15:44:29  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4602] :
	backport from trunk (rev #4601):
	- fixed ugly bug in linking the dialog profile tables.
	  Reported by Ovidiu Sas. Also many thanks to Ovidiu for testing and helping with debugging this problem. 


2008-08-10 13:00:16  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4600] :
	backport from trunk (#rev 4599):
	- bug fixed: Matching operators fail to match on some platforms.
	- Decription:
	Due to a bug in route.c, the regular expression matching operators do not
	work in all environments. For example, when building 1.4.0 or 1.3.2 on
	Solaris 10 (sun4v or x86) they give the same result independent of input.
	It would seem that if it were not for the accident of a particular struct
	alignment, these operators would be broken on all platforms.

	The underlying problem is a bad test in comp_s2s, which expects s2 to be a
str*, and tests st->s==NULL. When handling the matching operators MATCH_OP
and NOTMATCH_OP, it is a regex_t* instead - a fact reflected in the cast
	under the appropriate switch case.

	Credits go to Amy Linari (patch a bit reworked). Closes patch 2044475.



2008-08-10 12:36:28  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4598] :
	backport from trunk (rev #4597):
	- fixed error in installing TLS related files
	The installation of OpenSIPS fails because the sources tagged as notls do
	not include the etc/tls subdirectory;
	The patch defines the variable where those filenames should be store as
	empty, so that installation does not fail.

	Credits go to Sergio Gutierrez, closes patch #2042349


2008-08-10 12:27:10  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4596] :
	backport from trunk (rev #4595):
	- fixed conflict in definition of struct queue in Solaris.
	The struct named queue in module ratelimit conflicts with a struct named queue which is included in /usr/include/sys/stream.h in Solaris.
	The patch renames queue to rl_queue, and queue_params to rl_queue_params in module.

	Credits go to Sergio Gutierrez. Closes patch #2042287.


2008-08-10 12:15:25  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4594] :
	backport from trunk (rev #4593):
	- fixed compiling on Solaris : MSG_NOSIGNAL not defined in Solaris; if not present, define MSG_NOSIGNAL as 0.
	  Even if the send() call will not ignore SIGPIPE on Solaris, the signal will be cought by the signal handler installed by core and ignore. So, it should be safe on Solaris also, even without MSG_NOSIGNAL.

	Credits go to Sergio Gutierrez. Closes patch 2042217.


2008-08-10 12:00:02  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4592] :
	backport from trunk (rev #4591):
	fixed obsolete information for lcr in opensipsctl:
	 - lcr addgw_grp has not sense anymore. So better remove it to don't get
	 confused

	Patch provided by Angel Carpintero - closes patch 2041321


2008-08-09 00:35:00  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4590] :
	backport from trunk (rev #4589):
	- fixed improper access to statistic variables before having them initialized.


2008-08-08 23:10:27  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4586] :
	backport from trunk (rev #4585):
	- compile fix - UINT4 replaced with uint32_t (portable data type)


2008-08-07 12:25:55  Anca Vamanu, <anca at voice-system dot ro> 

	* [4583] :
	- backport from trunk
		- fixed a bug in BLA when phone was restarted after having refreshed his registration at least once ( thanks to Zahid Mehmod<zm23@columbia.edu> for help with improving BLA)
		- added null checks before inserting values in database to prevent a crash in mysql 



2008-08-07 12:20:29  Anca Vamanu, <anca at voice-system dot ro> 

	* [4582] :
	- backport from trunk 
	- the right fix for version reset when a refresh for presence.winfo is received 
	( reported by Luci Stanescu <luci@ag-projects.com> , patch #2038736 in opensips and Bugs item #2026681 for kamailio)


2008-08-05 07:54:00  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4579] :
	backport from trunk (rev #4578):
	- fixed no standard data type. UINT4 replaced with uint32_t.
	  Reported by Peter Nixon


===================== 2008-08-04 OpenSIPS v1.4.0 released ======================


2008-08-03 06:41:05  Dan Pascu, <dan at ag-projects dot com> 

	* [4555] :
	Fixed variable name in INSTALL that was forgotten during the openser to opensips renaming

2008-08-03 06:34:10  Dan Pascu, <dan at ag-projects dot com> 

	* [4554] :
	Fixed variable name in opensipsctlrc that was forgotten during the openser to opensips renaming

2008-08-02 22:38:19  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4553] :
	- added usage examples for dialplan
	- READMEs re-generated


2008-08-02 21:49:56  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4552] :
	- db schema re-generated


2008-08-02 21:43:08  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4551] :
	- updated entities and fixed dir for db schema


2008-08-02 20:36:14  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4550] :
	fixed strange 64bits warning


2008-08-02 20:15:49  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4549] :
	- fixed TLS init when openssl lib has already the compression disabled.


2008-08-02 20:06:07  Dan Pascu, <dan at ag-projects dot com> 

	* [4548] :
	Fixed typo in macro name

2008-08-02 19:55:33  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4547] :
	- fixed redefinition of standard C variables (better explicitly include the proper header file)


2008-08-02 19:47:24  Dan Pascu, <dan at ag-projects dot com> 

	* [4546] :
	Updated debian standards version for sid

2008-08-02 19:46:28  Dan Pascu, <dan at ag-projects dot com> 

	* [4545] :
	Fixed lintian warning about debian revision number being included in the version of the libdb-dev build dependency

2008-08-02 19:43:35  Dan Pascu, <dan at ag-projects dot com> 

	* [4544] :
	Suggest python for dbtextdb.py

2008-08-02 19:30:58  Dan Pascu, <dan at ag-projects dot com> 

	* [4543] :
	Do not depend on a particular version of python

2008-08-02 19:07:02  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4542] :
	- increase the upper limit for new libxmlrpc-c3 version


2008-08-02 18:46:56  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4541] :
	- automatically determine table names
	  Credits go to Dan Pascu


2008-08-02 18:45:04  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4540] :
	- fixed warnings about inexistent man macro
	  Credits go to Dan Pascu


2008-08-02 18:39:10  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4539] :
	fix error in oracle DB scheme generation, reported from Dan Pascu


2008-08-02 18:33:14  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4538] :
	- define HAVE_SYS_FILIO_H for compiling on Solaris (based on a patch provided by  Sergio Gutierrez)


2008-08-02 18:08:25  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4537] :
	- related to commit 4533


2008-08-02 18:06:12  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4536] :
	fix broken openserctl trusted [2003521]
	 - add back the ability to set empty pattern
	 - add back the ability to set a tag
	Credits go to Ovidiu Sas



2008-08-02 18:02:20  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4535] :
	- fix PGRES_FATAL_ERROR bug in postgres driver
	- the result set was cleared in this case, but no error was> returned
	- reported from Andrew O. Zhukov, gnugk at telegroup dot com dot ua

	- further bug fixes for db_postgres_fetch_result and db_postgres_store_result
	- return also for all other abnormal query states an error, as the result set
	  is here set to zero too
	- this is probably a little bit to strict, but in the openser context this
	  types normally should not happen
	- as the old behaviour could lead to crashes if this gets eventually reported
	  from the driver, this is surely an improvement  :-)  
	  (most query user check only for return value < 0, and not for == 0)
	- in case for the PGRES_EMPTY_QUERY this could be not recognized as error
	  from upper layers at all, as this is defined as zero in the pg driver..

	- change log level for 'probably invalid queries' from WARN to ERR
	- as we stop execution and return a failure anyway, we should also
	  inform the user with the correct log level about this
	- move error message to default case

	Credits go to Henning Westerholt.



2008-08-02 18:00:47  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4534] :
	Do not link against libs we do not use symbols from

	Credits go to Dan Pascu and Henning Westerholt.


2008-08-02 17:17:05  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4533] :
	various log message enhancements:
	  - remove prime_hash specific logging, instead log all hash_errors in the
	    actual routing function, now CRC32 errors are also logged
	  - change log level for doesn't completed rewrite_uri_recursor to INFO,
	    this is not necessarily an error, e.g. for blacklisted URIs. If an
	    error occured during this stage, its logged in previous steps of the
	    processing anyway.
	  - improve error messages for PV printing, instead of a generic message
	    give some hints about the problem

	Credits go to Henning Westerholt.


2008-08-02 16:52:49  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4532] :
	- link only with the strictly necessary libs
	  Credits for the fic go to Stanislaw Pitucha.


2008-08-02 16:48:01  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4531] :
	 - fixed dialog loading at startup - if there are too many (>200) dialogs in DB, the default PKG memory is not enough to load them all -> the module will fail to initialize
	  -> select is replaced by fetch.

	  Credits go to Carsten Bock for th fix


2008-08-02 15:59:47  Dan Pascu, <dan at ag-projects dot com> 

	* [4530] :
	Compacted statements (testing commit rights)

2008-08-01 12:47:33  Anca Vamanu, <anca at voice-system dot ro> 

	* [4529] :
	- applied patched from Denis Bilenko<denis@ag-projects.com>


2008-08-01 11:58:03  Anca Vamanu, <anca at voice-system dot ro> 

	* [4528] :
	- updated version count for tables presentity and pua


2008-07-30 20:09:33  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4527] :
	fixed compile error when EXTRA_DEBUG is used


2008-07-30 19:28:12  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4526] :
	64bits compile warnings fixed



2008-07-30 17:42:34  Anca Vamanu, <anca at voice-system dot ro> 

	* [4525] :
	- fixed spelling in documentation


2008-07-30 17:41:49  Anca Vamanu, <anca at voice-system dot ro> 

	* [4524] :
	- fixing a bug when phones use the same address


2008-07-30 17:38:31  Anca Vamanu, <anca at voice-system dot ro> 

	* [4523] :
	- fixed some more bugs in BLA
		- problem at openser restart
		- phone refresh issue
		- added one more column in table presentity
		- added one more column in table pua


2008-07-30 11:19:11  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4522] :
	- do not add /etc/tls and tlsops module in non-tls tarballs


2008-07-29 19:23:00  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4521] :
	- update information about authors and copyrights. Added people who actually wrote the modules and remove additions that snicked in duirnf docs update or docs conversion.


2008-07-29 18:31:43  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4520] :
	- reverted extra author masked by the revision 3940


2008-07-29 18:15:50  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4519] :
	- fix privacy and URI user parameter parser, they should handled
	  case-insensitive
	- reported from Bayan Towfiq, bayan at flowroute dot com
	  Credits go to Henning Westerholt


2008-07-29 18:06:52  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4518] :
	 -fixed bogus error message for out of dialog requests with preloaded Route headers
	 Credits go to Dan Pascu


2008-07-29 17:39:44  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4517] :
	- missing include


2008-07-29 17:05:53  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4516] :
	- new function added : unset_dlg_profile() - removes the dialog from a profile; This functionality is very useful if you have scenarios with serial forking and the profile is related to the destination.


2008-07-29 14:52:48  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4515] :
	- compile warning on gcc 4.3 fixed


2008-07-29 14:49:52  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4514] :
	- compile warnings fixed


2008-07-29 14:42:49  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4513] :
	bug fixed - active and early dialogs counters (statistics variables) are properly set while loading DB content 



2008-07-29 14:23:25  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4512] :
	- flushed NEWS as it was deprecated


2008-07-29 14:21:31  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4511] :
	- various updates of the project name


2008-07-29 14:20:38  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4510] :
	- refereces to project name updated


2008-07-29 14:19:40  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4509] :
	- utils update (project name)


2008-07-29 14:18:52  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4508] :
	- TLS docs updated


2008-07-29 13:53:32  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4507] :
	- project name updates


2008-07-29 13:45:39  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4506] :
	- example config file / docs / comments updated (project name)



2008-07-29 13:06:02  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4505] :
	-docs and perl API updated to reflect the new project name


2008-07-29 12:55:03  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4504] :
	- internal function renamed


2008-07-29 12:48:11  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4503] :
	-docs and perl API updated to reflect the new project name


2008-07-29 12:30:30  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4502] :
	- example config file updated (project name)


2008-07-29 12:27:16  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4501] :
	- example config file updated (project name)


2008-07-29 12:25:46  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4500] :
	- documentation updated (project name)


2008-07-29 12:22:27  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4499] :
	- example config file updated (project name)


2008-07-29 12:14:46  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4498] :
	- perl container renamed to fit the new project name


2008-07-29 12:05:48  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4497] :
	- directory holders for DB specs renamed to reflect the project name
	- script example file renamed
	 (all part of project migration)


2008-07-29 11:31:12  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4496] :
	- for sequential requests, the dialog lifetime is not update only if explicitly set from the script. This will avoid overwritting an initial custom lifetime with the default lifetime, during a sequential request.
	Reported by Kobi Eshun.


2008-07-25 19:39:15  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4495] :
	- fixes related to SRV load-balancing


2008-07-25 18:58:12  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4494] :
	- fixes related to SRV load-balancing


2008-07-25 17:24:58  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4493] :
	- SRV lookup is now doing proper load balancing (based on weights) between records with the same priority.


2008-07-25 17:23:22  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4492] :
	- removed empty lines


2008-07-25 16:15:22  Anca Vamanu, <anca at voice-system dot ro> 

	* [4491] :
	- fixed version bug for winfo Notifies ( Bugs item #2026681 for openser)


2008-07-25 15:03:26  Anca Vamanu, <anca at voice-system dot ro> 

	* [4490] :
	- fixed a restart bug in presence module
	- fixed not storing version field in database in pua module


2008-07-24 19:58:32  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4489] :
	- FL_FORCE_RPORT forces also addition of received parameter


2008-07-24 18:27:31  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4488] :
	- fixed proper next_label_id computation when the dialogs are loaded from DB.
	  Credits for the fix go to Carsten Bock


2008-07-24 18:06:18  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4487] :
	- fixed bug in calculating the number of routes that need to be skipped when populating the callee route set - there is no logic bug, but a C syntax one :P
	  Credits go to Dan Pascu for reporting it.


2008-07-21 20:22:41  Anca Vamanu, <anca at voice-system dot ro> 

	* [4486] :
	- fixed a copy-paste error in the documentation


2008-07-21 12:34:49  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4485] :
	- make usage of branches safe in local_route; even if there is no case for using branches there, a mechanism for enabling/disabling the branches in local route avoids any scripting errors.


2008-07-20 17:30:31  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4484] :
	- fixed script flags usage in local route


2008-07-19 20:38:40  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4483] :
	- updated packaging specs (part of the project migration)



2008-07-18 17:16:01  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 

	* [4482] :
	- local route enabled by default


2008-07-18 15:44:16  Anca Vamanu, <anca at voice-system dot ro> 

	* [4481] :
	- fixed some bugs that appeanred when dealing with event 'dialog;sla'


2008-07-18 15:37:29  Anca Vamanu, <anca at voice-system dot ro> 

	* [4480] :
	- fixed some bugs regarding event 'dialog;sla' processing


* 2008-07-10 
- OpenSIPS spawned from OpenSER branch 1.4.0
