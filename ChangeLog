
===================== 2009-03-23 OpenSIPS v1.4.5 released =====================

2009-03-23 13:52:17  Anca Vamanu, <anca at voice-system dot ro> 
	* [5515] :

	- backport from trunk rev 5513
		- fixed database connection not closed in main process and reopened in each child - caused 'Command out of syn' error


2009-03-21 21:20:11  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [5500] :

	backport from trunk (rev #5499):
	- fixed action taken if the string header is not found -> if not found and no "not_present" node exists, use the "otherwise" node.

	  Reported by Inaki Baz Castillo 


2009-03-21 19:40:57  Dan Pascu <dan at ag-projects dot com> 
	* [5498] :

	Fixed typo in comment

2009-03-21 18:36:32  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [5492] :

	backport from trunk (rev #5461):

	- fixed bug in tls_blocking_write : avoid infinit looping because of SSL_ERROR_WANT_READ/WRITE with no ops - after 32 attempts without any write, report error.
	  Closes bug #2505427.



2009-03-20 18:14:01  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [5491] :

	backport from trunk (rev #5490)

	- fixed creation of requests that have URO params in TO/FROM hdr and also requires TAG.
	 
	  Credits go to Christophe Sollet.
	  Closes patch 2694523.



2009-03-20 15:04:36  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [5487] :

	backport from trunk (rev #5486):
	- fixed loading and inserting of DELETED dialogs in DB.
	  
	  Credits go to Hugues Mitonneau.
	  Closes patch #2694252


2009-03-20 14:09:13  Iulia Buble <iulia at opensips dot org> 
	* [5485] :

	Postgres bug fixed. Bug item #2557032, raised by David Roberge

2009-03-19 17:51:11  Dan Pascu <dan at ag-projects dot com> 
	* [5480] :

	Fixed wrong condition in test

2009-03-19 13:24:26  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [5478] :

	backport from trunk (rev #5477):
	- more verbous error when SSL_ERROR_SYSCALL happens


2009-03-19 11:42:06  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [5474] :

	backport from trunk (rev #5473):
	- change data type for priority column in LCR table from unsigned char to unsigned int to avoid problem with MSSQL via UNIXODBC
	  Closese bug id #2689928.
	  Credits go to Alex Massover.


2009-03-18 16:53:14  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [5472] :

	backport from trunk (rev #5471):
	- fixed bogus reference to the query string:
	  Credits go to Alex Massover
	  Closes patch #2691928


2009-03-18 14:38:04  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [5468] :

	backport from trunk (rev #5462):
	- fixed bug in matching dialog (based on SIP elements) - instead of reprting NOT FOUND when matching a dialog in DELETE state, simply continue, becuase maybe there was second successfull attempt of the call with the same callid and fromtag. Typicall example: INVITE + 407 -> dialog DELETED, INVITE+ 200 OK - both dialogs have the same callid and fromtag.

	 Many, many thanks to Herman Bastiaens for reporting and helping with the debugging.


2009-03-18 13:38:44  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [5467] :

	backport from trunk (rev #5466):
	- fixed mem leak at shutdown


2009-03-18 13:22:40  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [5465] :

	backport from trunk (rev #5464):
	- fixed mem leak in disaptcher at reload time


2009-03-17 11:35:12  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [5460] :

	backport from trunk (rev #5431):

	- fixed record_route_preset() function to accept the parameters set from script (via add_rr_param) or  via internal API



2009-03-17 11:29:13  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [5459] :

	backport from trunk (rev #5434):
	- fixed RR printing in TM dlg related functions



2009-03-16 20:43:53  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [5457] :

	backport from trunk - rev 5440

	- fixed initialization of the MI processes - init them as normal work processes (init_child) as the route may be executed there.

	- fixed DB initialization of several modules (no support for timer)

	- reworked the EXTRA PROC interface to allow passing flags (if a process requires initialization from the modules or not)


2009-03-16 20:27:55  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [5456] :

	 backport from trunk (rev 5455):
	- fixed bogus free of the changeable debug pointer.


2009-03-16 17:26:44  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [5451] :

	backport from trunk (rev #5449):
	- fixed BLOB handling in postgres - the escaped BLOB needs to be moved back into pkg memory as PQunescapeBytea allocates the string in system mem.
	  Credits go to Vasil Kolev


2009-03-16 15:08:45  Sergio Gutierrez <saguti at gmail dot com> 
	* [5448] :

	- Backport of revisions 5709 and 5710 from Kamailio.
	  Credits go to Henning Westherholt.


2009-03-15 20:44:54  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [5443] :

	backport from trunk (rev #5442):
	- automatically use the maddr indication (when forwarding to a SIP URI) if present in URI.

	  Closes bug #2056761.


2009-03-11 17:43:23  Sergio Gutierrez <saguti at gmail dot com> 
	* [5433] :

	- Backport from trunk, revision 5432.
	Closes Bug 2682953. Credits go to Andreas.



2009-03-11 15:00:07  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [5430] :

	bavkport from trunk (rev 5425):
	 fixed bug in the branch serialize algorithm


2009-03-09 15:42:50  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [5409] :

	- fixed improper calculation of new RURI in next_gw() in failure route


2009-03-09 14:40:38  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [5406] :

	backport from trunk (rev #5405):
	- fixed setting of Q value when appending the curent RURI as branch


2009-03-09 13:31:42  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [5403] :

	backport from trunk (rev 5402):
	- more verbous when come to error


2009-03-06 17:16:38  Sergio Gutierrez <saguti at gmail dot com> 
	* [5399] :

	- Fixed ignore of use_uri_table parameter.


2009-03-05 21:50:53  Sergio Gutierrez <saguti at gmail dot com> 
	* [5396] :

	- Fixed ignore of use_uri_table parameter.



2009-03-04 04:34:48  Di-Shi Sun <di-shi at transnexus dot com> 
	* [5388] :

	Updated release notes.


2009-03-04 04:32:15  Di-Shi Sun <di-shi at transnexus dot com> 
	* [5387] :

	Updated README.


2009-03-02 05:09:45  Di-Shi Sun <di-shi at transnexus dot com> 
	* [5383] :

	Updated to use OSP Toolkit 3.5.0.


2009-02-28 00:11:59  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [5382] :

	replace broken opensips.spec-4.1 with working opensips.spec-4.4.

	Closes patch 2641715.
	Credits go to Marc LEURENT and Julian Yap


2009-02-27 18:06:42  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [5375] :

	backport from trunk (rev #5370):
	-fixed fetching of returned AVPS in RADIUS reply.
	 
	 Closes bug #2627561
	 Credits go to Alex Massover.


2009-02-27 17:37:13  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [5374] :

	backport from trunk (rev 5372 + 5372):

	- fix the blob len calculation - use the len from the DB driver.

	- I looked into PGunescape (which is used on BLOB fields) and turns out it doesn't add NULL termination on the strings. It wouldn't be a problem if some other code didnt't rely on strlen() of such fields...
	Closes bug 2642701.
	Credits go to Vasil Kolev.


2009-02-26 12:19:50  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [5369] :

	backport from trunk (rev 5368):
	- fixed bad parsing of returned BLOBs.

	Closes bug #2636665.
	Credita go to Vasil Kolev.


2009-02-26 11:47:00  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [5366] :

	backport from trunk (rev #5365 + #5365):
	- fixed crash when trying to save in DB the callee socket (that might be null).

	Closes bug #2633350.
	Credits go to Vasil Kolev.

	- completion to the previous fix - another place where the callee socket (which may be NULL) is saved in DB.



2009-02-26 11:12:00  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [5363] :

	backport from trunk (rev #5362):

	- fixed detection and parsing of CSEQ header.

	Closes #2638551.
	Credits go to Norm Brandinger.


2009-02-25 11:46:08  Dan Pascu <dan at ag-projects dot com> 
	* [5358] :

	Do not fix contact, only if both IP and port are the same

2009-02-23 15:55:41  Anca Vamanu, <anca at voice-system dot ro> 
	* [5354] :

	- fix:	- removed considering the 'tuple' element in application/pidf+xml documents compulsory
			- removed considering 'transformations' node in pres-rules xcap document to be compulsory
		( reported by Oren K. )


2009-02-19 19:37:01  Sergio Gutierrez <saguti at gmail dot com> 
	* [5350] :

	- Fixed typos and grammar.


2009-02-19 18:37:37  Sergio Gutierrez <saguti at gmail dot com> 
	* [5348] :

	- Fixed small typos and grammar.


2009-02-19 17:25:13  Sergio Gutierrez <saguti at gmail dot com> 
	* [5347] :

	- Fix order of includes. Backport from Kamailio, revision 5624 (Credits go to Jan Janak)


2009-02-19 02:33:51  Sergio Gutierrez <saguti at gmail dot com> 
	* [5345] :

	- Fixed small typos in doc.


2009-02-18 22:20:20  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [5339] :

	- fixed typo in docs


2009-02-17 16:52:19  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [5327] :

	Backport from trunk (rev #5326)

	This patch defines an approach to detect SPARC processors, so that more
	specific optimization options can be added to GCC.
	The family of chips detected are UltraSPARC II, UltraSPARC III (Cu and i),
	and UltraSPARC T1; for this last one, optimizations are used only if gcc is
	> 4.2.
	See http://gcc.gnu.org/onlinedocs/gcc/SPARC-Options.html#SPARC-Options for
	more info.

	Closes patch 2512634.
	Credits go to Sergio Gutierrez


2009-02-17 16:29:29  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [5325] :

	Backport from trunk (rev #5324)

	At charset_test() in opensipsdbctl.mysql script. grep is called with an
	option which is not supported by standard grep in Solaris.
	This patch proposes a different approach for that case; it defines a
	variable which counts how many times user has failed in passing a supported
	charset; after 3 tries, script exits with error code of 1.

	Closes 2577793.
	Credits go to Sergio Gutierrez.


2009-02-17 00:22:49  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [5320] :

	- RLS module added to the opensips-presence deb package


2009-02-15 00:34:01  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [5315] :

	backport from trunk (rev #5314):

	When 'content-type' is not the last header of a multipart content,
	remaining headers were not filtered out.

	Closed patch #2538033.
	Contributed by Hugues Mitonneau



2009-02-09 20:04:22  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [5292] :

	backport from trunk (rev #5291):
	When the dialog module is initialized, the load callback list is not properly marked as destroyed. So when a module register itself as a load callback, this one is not 'run on the spot'.

	Closes bug #2581745


2009-02-09 18:28:58  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [5284] :

	backport from trunk (rev #5240)
	- do not destroy modules if not initialized - module resorces may get lost (fifo files, sockets, etc). 
	Side efect of this bug: If opensips is up and running and at the same time 'opensips -c' is run in order to check a new config, if errors are detected in the new config, the opensisps_fifo file is removed.

	Closes bug 2166305.


2009-02-09 13:46:02  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [5279] :

	backport from trunk (rev #5278):
	- fixed accessing the RPL structure in dlg_onreply - the reply may be a FAKED_REPLY when the INVITE is replied from the script.
	  Closes bug 2573029
	  Credits go to vasil dot kolev at attractel dot com


2009-02-08 02:17:25  Sergio Gutierrez <saguti at gmail dot com> 
	* [5269] :

	- Error in example. The variable to evaluate return code of previous function is $retcode



2009-02-04 11:35:38  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [5247] :

	backport from trunk (rev 5246):
	- fixed availability of branch index in onreply route and failure route


2009-01-27 11:58:18  Anca Vamanu, <anca at voice-system dot ro> 
	* [5218] :

	- backport from trunk rev #5203
		- fixed the last commit - wrong check to see if initial request ( thanks to Norman Brandinger for help in finding this)


2009-01-23 19:00:48  Anca Vamanu, <anca at voice-system dot ro> 
	* [5205] :

	- fixed memory leak bug


2009-01-23 15:31:07  Anca Vamanu, <anca at voice-system dot ro> 
	* [5202] :

	- fixed a error in a log message ( reported by Norman Brandinger)
	--Ths lin, and those below, will be ignored--

	M    send_subscribe.c


2009-01-23 15:15:10  Anca Vamanu, <anca at voice-system dot ro> 
	* [5200] :

	- fixed a bug in not handling an error case ( reported by Norm Brandinger in Bug item #2530958 )


2009-01-21 13:47:44  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [5187] :

	- fixed some bash syntax error
	  Credits go to Neil D'souza.


2009-01-21 05:14:14  Di-Shi Sun <di-shi at transnexus dot com> 
	* [5183] :

	Added LOCALBASE.


2009-01-20 11:10:23  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [5180] :

	- backport from trunk (rev #5179)
	fixed freeing the blacklist list


2009-01-16 15:33:24  Bogdan-Andrei Iancu, <bogdan at voice-system dot ro> 
	* [5176] :

	-backport from trunk (rev #5099):
	Don't modify strings allocated in the shared memory pool, this
	can cause race conditions.

===================== 2009-01-15 OpenSIPS v1.4.4 released =====================

