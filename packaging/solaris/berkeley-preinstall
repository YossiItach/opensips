#!/sbin/sh
# Script for checking prerequisites for OpenSIPS-MySQL

BASE="OpenSIPS-base"
LIBBDB="libdb-4.4.so"
TMPLIST="/tmp/.opensipsbdb"

pkginfo | grep -i $BASE > /dev/null

if [ $? -eq 1 ]
then
	echo "OpenSIPS-Berkeley depends of package OpenSIPS-base and it is not installed";
	exit 1;
fi

find / -name $LIBBDB > $TMPLIST 2>&1
lines=`wc -l $TMPLIST`

if [ $lines = "0" ]
then
	echo "OpenSIPS-Berkeley depends of DB Berkeley Libraries, which cannot be found on system";
	exit 1;
else
	exit 0;
fi
